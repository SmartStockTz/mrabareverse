"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.authAdapter = void 0;
var default_auth_factory_1 = require("./default-auth.factory");
var http_client_controller_1 = require("../controllers/http-client.controller");
var http_adapter_factory_1 = require("./http-adapter.factory");
function authAdapter(config, appName) {
    var _a, _b, _c, _d;
    var adapters = (_a = config.credential(appName)) === null || _a === void 0 ? void 0 : _a.adapters;
    if (adapters && adapters.auth && typeof adapters.auth === 'function') {
        return adapters.auth();
    }
    else if (adapters && adapters.auth
        && typeof adapters.auth === 'string'
        && config.credential(adapters.auth)
        && config.credential(adapters.auth).adapters
        && ((_b = config.credential(adapters.auth).adapters) === null || _b === void 0 ? void 0 : _b.auth)
        && typeof ((_c = config.credential(adapters.auth).adapters) === null || _c === void 0 ? void 0 : _c.auth) === "function") {
        var _adapters = (_d = config.credential(adapters.auth)) === null || _d === void 0 ? void 0 : _d.adapters;
        // @ts-ignore
        return _adapters.auth();
    }
    else {
        return new default_auth_factory_1.DefaultAuthFactory(new http_client_controller_1.HttpClientController(appName, (0, http_adapter_factory_1.httpAdapter)(config, appName)));
    }
}
exports.authAdapter = authAdapter;
